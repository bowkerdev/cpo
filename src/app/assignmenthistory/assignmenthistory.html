<div ng-controller="assignmentHistoryCtrl">
  <div class="row" ng-show="showDetailView!='showDetail'">
    <div class="col-md-12">
      <div class="page-title" style="padding-bottom: 0 !important;padding-top: 28px !important;">
        <ul class="nav nav-tabs">
          <li ng-class="{'active':activeTab==5}">
            <a data-toggle="tab" style="padding: 14px;" ng-click="selectTab(5)">
              <span translate="worktable.MKT_FC"></span>
            </a>
          </li>
          <li ng-class="{'active':activeTab==6}">
            <a data-toggle="tab" style="padding: 14px;" ng-click="selectTab(6)">
              <span translate="worktable.CUS_FC"></span>
            </a>
          </li>
          <li ng-class="{'active':activeTab==1}">
            <a data-toggle="tab" style="padding: 14px;margin-left: 5px;" ng-click="selectTab(1)">
              <span translate="worktable.BULK_ORDER"></span>
            </a>
          </li>
          <li ng-class="{'active':activeTab==2}">
            <a data-toggle="tab" style="padding: 14px;" ng-click="selectTab(2)">
              <span translate="worktable.SAMPLE_ORDER"></span>
            </a>
          </li>
          <li ng-class="{'active':activeTab==3}">
            <a data-toggle="tab" style="padding: 14px;" ng-click="selectTab(3)">
              <span translate="worktable.MI_ORDER"></span>
            </a>
          </li>
          <li ng-class="{'active':activeTab==4}">
            <a data-toggle="tab" style="padding: 14px;" ng-click="selectTab(4)">
              <span translate="worktable.NON_TRADE_CARD"></span>
            </a>
          </li>

        </ul>
      </div>
    </div>
    <div class="col-md-12">
      <div class="page-title">
        <form role="form" class="form-inline" name="formPlan" novalidate>
          <div class="container-flex-start">

          </div>
          <div class="search-form-his pull-left">
            <div class="col-lg-3 col-md-4 col-sm-6 col-xs-12">
              <div>Working No:</div>
              <input ng-model="workingNo" style="height: 30px;" type="text" ng-paste="formatPaste($event,'workingNo')" />
            </div>
             <div class="col-lg-3 col-md-4 col-sm-6 col-xs-12" ng-show="activeTab!=5&&activeTab!=6">
              <div >MOs:</div>
              <input  ng-model="mos" style="height: 30px;" type="text" ng-change="changeFormat('mos')" />
            </div>
            <div class="col-lg-3 col-md-4 col-sm-6 col-xs-12" ng-show="activeTab!=5&&activeTab!=6&&activeTab!=1">
              <div >PO:</div>
              <input  ng-model="po" style="height: 30px;" type="text" />
            </div>
            <div class="col-lg-3 col-md-4 col-sm-6 col-xs-12" ng-show="activeTab==1">
              <div >Origin POs:</div>
              <input ng-model="originPO" style="height: 30px;" type="text" ng-paste="changeFormat('originPO')" />
            </div>
             <div class="col-lg-3 col-md-4 col-sm-6 col-xs-12" ng-show="activeTab!=5&&activeTab!=6">
              <div >POs:</div>
              <input  ng-model="pos" style="height: 30px;" type="text" ng-change="changeFormat('pos')" />
            </div>
            <div class="col-lg-3 col-md-4 col-sm-6 col-xs-12" ng-show="activeTab!=5&&activeTab!=6">
              <div >Order Type:</div>
              <select id="orderTypeSelect" style="font-size: 14px;width: 200px;height: 30px;" ng-model="orderType"
                class="form-control" ng-options="orderType.label for orderType in orderTypeList">
              </select>
            </div>
            <div class="col-lg-3 col-md-4 col-sm-6 col-xs-12" ng-show="activeTab!=5&&activeTab!=6">
              <div class="batch-date-item">Factory:</div>
              <div ng-dropdown-multiselect="" options="factoryList" selected-model="factorys"
                      extra-settings="idPropertySettings" style="width:auto;display: inline-block;height: 30px;" id="factory-list"
                      events="changeEventSettings"></div>
            </div>
             <div class="col-lg-3 col-md-4 col-sm-6 col-xs-12" ng-show="activeTab!=5&&activeTab!=6">
              <div class="">CRD (From):</div>
              <div ng-time class="input-group date form_date" data-date-format="yyyy-mm-dd"
                ng-model="crdFrom" style="height: 32px;">
                <input ng-model="crdFrom" class="form-control" size="16" type="text" value="" readonly>
                <span class="input-group-addon"><i class="fa fa-calendar"></i></span>
              </div>
             </div>
             <div class="col-lg-3 col-md-4 col-sm-6 col-xs-12" ng-show="activeTab!=5&&activeTab!=6">
              <div class="">&nbsp;&nbsp;CRD (To):</div>
              <div ng-time class="input-group date form_date" data-date-format="yyyy-mm-dd"
                ng-model="crdTo" style="height: 32px;">
                <input ng-model="crdTo" class="form-control" size="16" type="text" value="" readonly>
                <span class="input-group-addon"><i class="fa fa-calendar"></i></span>
              </div>
             </div>
             <div class="col-lg-3 col-md-4 col-sm-6 col-xs-12" ng-show="activeTab!=5&&activeTab!=6">
              <div class="">TCPSDD (From):</div>
              <div ng-time class="input-group date form_date" data-date-format="yyyy-mm-dd"
                ng-model="tcpsddFrom" style="height: 32px;">
                <input ng-model="tcpsddFrom" class="form-control" size="16" type="text" value="" readonly>
                <span class="input-group-addon"><i class="fa fa-calendar"></i></span>
              </div>
             </div>
             <div class="col-lg-3 col-md-4 col-sm-6 col-xs-12" ng-show="activeTab!=5&&activeTab!=6">
              <div class="">&nbsp;&nbsp;TCPSDD (To):</div>
              <div ng-time class="input-group date form_date" data-date-format="yyyy-mm-dd"
                ng-model="tcpsddTo" style="height: 32px;">
                <input ng-model="tcpsddTo" class="form-control" size="16" type="text" value="" readonly>
                <span class="input-group-addon"><i class="fa fa-calendar"></i></span>
              </div>
             </div>
             <div class="col-lg-3 col-md-4 col-sm-6 col-xs-12" ng-show="activeTab!=5&&activeTab!=6">
              <div class="">Order Date (From):</div>
              <div ng-time class="input-group date form_date" data-date-format="yyyy-mm-dd"
                ng-model="orderDateFrom" style="height: 32px;">
                <input ng-model="orderDateFrom" class="form-control" size="16" type="text" value="" readonly>
                <span class="input-group-addon"><i class="fa fa-calendar"></i></span>
              </div>
             </div>
             <div class="col-lg-3 col-md-4 col-sm-6 col-xs-12" ng-show="activeTab!=5&&activeTab!=6">
              <div class="">&nbsp;&nbsp;Order Date (To):</div>
              <div ng-time class="input-group date form_date" data-date-format="yyyy-mm-dd"
                ng-model="orderDateTo" style="height: 32px;">
                <input ng-model="orderDateTo" class="form-control" size="16" type="text" value="" readonly>
                <span class="input-group-addon"><i class="fa fa-calendar"></i></span>
              </div>
             </div>
             <div class="col-lg-3 col-md-4 col-sm-6 col-xs-12" ng-show="activeTab!=5&&activeTab!=6">
              <div class="batch-date-item">Is Reserve Material:</div>
              <div ng-dropdown-multiselect="" options="reserveList" selected-model="reserves"
                      extra-settings="idPropertySettings" style="width:auto;display: inline-block;height: 30px;" id="reserve-list"
                      events="changeEventSettings"></div>
            </div>
            <div class="col-lg-3 col-md-4 col-sm-6 col-xs-12">
              <div class="batch-date-item">Batch Date:</div>
              <select style="font-size: 14px;width: 150px;height: 30px;" ng-model="batchDate"
                class="form-control batch-date-item" ng-options="item.label for item in batchDates">
              </select>
             </div>

          </div>

          <div class="pull-right">

            <form role="form" class="form-inline" name="formPlan" novalidate>

            </form>
          </div>
        </form>
        <div style="clear: both;"></div>
        <form role="form" class="form-inline" name="formPlan" novalidate style="padding-bottom: 0px;padding-top: 20px">
          <div class="container-flex-start">

          </div>

          <div class="">

            <div class="form-group container-flex-start" style="flex-wrap: wrap;">
              <button class="btn btn-secondary btn-single" ng-click="searchlist()">
                <i class="fa-search"></i>&nbsp;&nbsp;
                <span translate="index.SEARCH"></span>
              </button>
							<button style="float: right" class="btn btn-secondary btn-single" ng-click="importFile(60003)" ng-if="activeTab=='1'">
								<i class="fa fa-upload"></i>
								<span translate="">Import Split Order</span>
							</button>
              <button style="float: right;" class="btn btn-secondary btn-single" ng-click="exportFile()">
                <i class="fa fa-download"></i>
                <span translate="">Export Orders</span>
              </button>
              <button ng-show="activeTab!=5&&activeTab!=4" style="float: right;" class="btn btn-secondary btn-single"
                ng-click="transferDocumnet()">
                <i class="fa fa-exchange"></i>
                <span translate="">Transfer Document</span>
              </button>
              <button ng-show="activeTab==1" style="float: right;" class="btn btn-secondary btn-single"
                ng-click="changeManualOrderStatus()">
                <i class="fa fa-exchange"></i>
                <span translate="">Change Order Status</span>
              </button>
              <button ng-show="activeTab==1" style="float: right;" class="btn btn-secondary btn-single"
                ng-click="CloseOrder()">
                <i class="fa fa-exchange"></i>
                <span translate="">Close Order</span>
              </button>
              <button ng-show="activeTab==1" style="float: right;" class="btn btn-secondary btn-single"
                ng-click="setMaterialReserveTarget()">
                <i class="fa fa-exchange"></i>
                <span translate="">Set Material Reserve Target</span>
              </button>
              <button ng-show="activeTab==1" style="float: right;background-color: coral !important;" class="btn btn-secondary btn-single"
                ng-click="importFile(3000)">
                <i class="fa fa-upload"></i>
                <span translate="">Import Order Payment</span>
              </button>
              <button ng-show="activeTab==1" style="background-color: coral !important;" class="btn btn-secondary btn-single"
                ng-click="editOrderPayment()">
                <i class="fa fa-pencil-square-o"></i>
                <span translate="">Edit Order Payment</span>
              </button>
              <button ng-show="activeTab==1" style="background-color: coral !important;" class="btn btn-secondary btn-single"
                ng-click="editABGradeInfo()">
                <i class="fa fa-pencil-square-o"></i>
                <span translate="">Edit A/B Grade Info</span>
              </button>
              <button ng-show="activeTab==1" class="btn btn-secondary btn-single" ng-click="exportPDF()">
                <i class="fa fa-share"></i>
                <span translate="">Export PDF</span>
              </button>
            </div>

          </div>
        </form>
        <div ng-if="activeTab==1">
          <div id="assignmentHistoryGrid1" ui-grid="gridOptions1" ui-grid-pagination ui-grid-selection
            ui-grid-resize-columns ui-grid-auto-resize style="height:auto ;" hight-auto-fill-bottom>
            <div class="well grid-loading" ng-show="showLoading">
              <i class="fa fa-spin fa-spinner"></i>
              <strong>Loading...</strong>
            </div>
          </div>
        </div>
        <div ng-if="activeTab==2">
          <div id="assignmentHistoryGrid2" ui-grid="gridOptions2" ui-grid-pagination ui-grid-selection
            ui-grid-resize-columns ui-grid-auto-resize style="height:auto ;" hight-auto-fill-bottom>
            <div class="well grid-loading" ng-show="showLoading">
              <i class="fa fa-spin fa-spinner"></i>
              <strong>Loading...</strong>
            </div>
          </div>
        </div>
        <div ng-if="activeTab==3">
          <div id="assignmentHistoryGrid3" ui-grid="gridOptions3" ui-grid-pagination ui-grid-selection
            ui-grid-resize-columns ui-grid-auto-resize style="height:auto ;" hight-auto-fill-bottom>
            <div class="well grid-loading" ng-show="showLoading">
              <i class="fa fa-spin fa-spinner"></i>
              <strong>Loading...</strong>
            </div>
          </div>
        </div>
        <div ng-if="activeTab==4">
          <div id="assignmentHistoryGrid4" ui-grid="gridOptions4" ui-grid-pagination ui-grid-selection
            ui-grid-resize-columns ui-grid-auto-resize style="height:auto ;" hight-auto-fill-bottom>
            <div class="well grid-loading" ng-show="showLoading">
              <i class="fa fa-spin fa-spinner"></i>
              <strong>Loading...</strong>
            </div>
          </div>
        </div>
        <div ng-if="activeTab==5">
          <div id="assignmentHistoryGrid5" ui-grid="gridOptions5" ui-grid-pagination ui-grid-selection
            ui-grid-resize-columns ui-grid-auto-resize style="height:auto ;" hight-auto-fill-bottom>
            <div class="well grid-loading" ng-show="showLoading">
              <i class="fa fa-spin fa-spinner"></i>
              <strong>Loading...</strong>
            </div>
          </div>
        </div>
        <div ng-if="activeTab==6">
          <div id="assignmentHistoryGrid6" ui-grid="gridOptions6" ui-grid-pagination ui-grid-selection
            ui-grid-resize-columns ui-grid-auto-resize style="height:auto ;" hight-auto-fill-bottom>
            <div class="well grid-loading" ng-show="showLoading">
              <i class="fa fa-spin fa-spinner"></i>
              <strong>Loading...</strong>
            </div>
          </div>
        </div>
      </div>
    </div>

  </div>
</div>
<ng-include src="'app/common/commonconfirm.html'"></ng-include>
<ng-include src="'app/assignmenthistory/editorderpayment.html'"></ng-include>
<ng-include src="'app/assignmenthistory/editabgradeinfo.html'"></ng-include>

<script id="assignmentHistoryHoverTemplate" type="text/template">
  <div class="ui-grid-cell-contents" title="TOOLTIP">
		{{COL_FIELD CUSTOM_FILTERS}}
	</div>
</script>


<script type="text/ng-template" id="transfer-document.html">
  <div class="modal-header">
    <h3 class="modal-title" >Transfer Document</h3>
  </div>
  <div class="modal-body" style="display: flex;">
  	<span class="input-group-addon" style="width: 100px;">Document:&nbsp;</span>
    <select ng-model="selectDocument" ng-options="document.label for document in documents" style="height: 32px;width:100%;padding-left: 10px;"></select>
  </div>
  <div class="modal-footer">
    <button class="btn " type="button" ng-click="dismiss()" style="background-color: gray;color: white">Cancel</button>
    <button type="submit" class="btn btn-secondary btn-single" ng-click="submit()">Submit</button>
  </div>
</script>

<script type="text/ng-template" id="changeOrderStatus.html">
  <div class="modal-header">
    <h3 class="modal-title" >Change Order Status</h3>
  </div>
  <div class="modal-body" style="display: flex;">
  	<span class="input-group-addon" style="width: 100px;">Order Status:&nbsp;</span>
    <select ng-model="selectorderStatus" ng-options="orderStatus.label for orderStatus in orderStatusList" style="height: 32px;width:100%;padding-left: 10px;"></select>
  </div>
  <div class="modal-footer">
    <button class="btn " type="button" ng-click="dismiss()" style="background-color: gray;color: white">Cancel</button>
    <button type="submit" class="btn btn-secondary btn-single" ng-click="submit(selectorderStatus)">Submit</button>
  </div>
</script>

<script id="redLabelTemplate" type="text/template">
  <div class="container-flex-center-center" style="width: 100%;height: 100%;" ng-class="{'background-red':row.entity.fillRate >= 90}">
		<div ng-bind="row.entity.fillRate"></div>
		%
	</div>
</script>

<style>
  .background-blue {
    background-color: #4579F0;
    color: white;
  }

  .background-green {
    background-color: #5AD295;
    color: white;
  }

  .background-red {
    background-color: #a9293d;
    color: white;
  }

  .background-news {
    margin: 10px;
    background-image: url(assets/images/forgiveGreenNewIcon.png);
    width: 100%;
    height: 100%;
    background-position: center left;
    background-repeat: no-repeat;
    background-size: 20px;
  }

  .link-label {
    color: royalblue;
    text-decoration: underline;
  }

  .work-table-label,
  .work-table-label+select {
    padding: 8px;
    margin-bottom: 0px;
  }

  .work-table-label>span {
    float: right;
  }

  div[ng-controller="assignmentHistoryCtrl"] .search-form-his{
    width: 100%;
  }

  div[ng-controller="assignmentHistoryCtrl"] .dropdown-toggle{
    height: 30px;
  }

  div[ng-controller="assignmentHistoryCtrl"] .search-form-his>div{
    padding: 10px;
    display: flex;
    justify-content: flex-start;
    align-items: center;
  }

  div[ng-controller="assignmentHistoryCtrl"] .search-form-his>div>div:first-child{
    width: 40%;
    margin-left: 0px;
    text-align: right;
    padding-right: 5px;
  }

  div[ng-controller="assignmentHistoryCtrl"] .search-form-his>div>div+*{
    width: 60% !important;
  }

  div[ng-controller="assignmentHistoryCtrl"] .panel .panel-heading {
    border-bottom: none;
    padding: 0px;
    font-size: inherit;
  }

  div[ng-controller="assignmentHistoryCtrl"] .panel {
    padding: 0px;
    margin: 0px;
    border-bottom: gray 1px solid;
    box-shadow: none;
  }

  div[ng-controller="assignmentHistoryCtrl"] .panel:last-child {
    border-bottom: none;
  }

  div[ng-controller="assignmentHistoryCtrl"] .col-md-12.container-flex-start+.col-md-12.container-flex-start {
    margin: 15px 0px;
  }
  
  div[ng-controller="assignmentHistoryCtrl"] .page-title .btn {
    margin-left: 5px;
    margin-bottom: 5px !important;
  }
</style>
